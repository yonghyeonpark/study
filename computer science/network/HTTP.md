# HTTP

## HTTP 기본 특성

- **클라이언트-서버 구조**
    - 클라이언트와 서버가 독립적으로 분리
- **무상태 프로토콜(Stateless)**
    - 서버가 클라이언트의 상태를 보존하지 않습니다.
    - 장점
        - 서버 확장성이 높습니다. (스케일 아웃)
    - 단점
        - 클라이언트가 추가 데이터를 매 요청마다 전송해야 합니다.
- **비 연결성(Connectionless)**
    - 요청-응답 후 연결을 종료합니다.
    - TCP/IP 연결을 매번 새로 맺어야 해서 `3-way handshake` 시간이 추가됩니다.<br>
      ⇒ **HTTP 지속 연결**(`Persistent Connections`, `Keep-Alive`)로 문제 해결
- **URI와 URL**
    - **URI**(`Uniform Resource Identifier`)는 리소스 식별을 위한 통합 자원 식별자입니다.
    - **URL**(`Uniform Resource Locator`)은 리소스의 위치를 나타내는 통합 자원 위치입니다.
    - `URL`은 `URI`의 하위 개념

## HTTP 메서드

- **GET**
    - 리소스 조회에 사용합니다.
    - 서버의 데이터를 변경하지 않습니다.
    - 메시지 바디를 사용할 수 있으나, 지원하는 곳이 많지 않아서 권장하지 않습니다.
- **POST**
    - 요청 데이터 처리에 사용합니다. (주로 등록에 사용)
    - 메시지 바디를 통해 서버로 요청 데이터를 전달합니다.
    - 데이터 조회에도 사용할 수 있지만, 캐싱이 어렵다는 문제가 있습니다.
- **PUT**
    - 리소스를 완전히 대체합니다.
    - 존재하지 않는 리소스라면 새로 생성합니다.
    - **클라이언트가 리소스의 위치를 알고 URI를 지정합니다.**
- **PATCH**
    - 리소스를 부분 변경합니다.
- **DELETE**
    - 리소스를 삭제합니다.

## HTTP 메서드 속성

<img src = "https://github.com/user-attachments/assets/ac897086-88a0-4dad-b2b2-df4f6b53b371"><br>

- **안전(Safe Methods)**
    - 리소스를 변경하지 않는 속성
- **멱등(Idempotent Methods)**
    - 한번 호출과 여러번 호출의 결과가 동일하다는 속성
    - `POST`는 여러번 호출 시, 여러 리소스를 생성하기 때문에 멱등하지 않습니다.
    - 네트워크 문제로 통신이 실패했을 때, 클라이언트가 같은 요청을 재시도 해도 되는지의 근거가 됩니다.
- **캐시 가능(Cacheable Methods)**
    - 실제로는 `GET` 정도만 캐시로 사용 가능합니다.
    - `POST`, `PATCH`는 본문 내용까지 캐시 키로 고려해야해서 구현이 복잡합니다.

## 상태 코드

### 2xx (Successful)

- **200 OK**
    - 요청 성공 시에 사용합니다.
    - 주로 `GET` 요청에 대한 응답으로 사용합니다.
- **201 Created**
    - 새로운 리소스 생성 성공 시에 사용합니다.
    - 주로 `POST` 요청에 대한 응답으로 사용합니다.
    - `Location` 헤더에 새로 생성된 리소스 `URI` 를 포함합니다.
- **204 No Content**
    - 요청은 성공했지만, 응답 본문에 보낼 데이터가 없을 때 사용합니다.

### 3xx (Redirection)

- **영구 리다이렉션**
    - 특정 리소스의 `URI`가 영구적으로 이동하는 것을 의미합니다.
    - **301 Moved Permanently**
        - 리다이렉트시 요청 메서드가 `GET`으로 변경될 수 있으며, 그 과정에서 본문이 제거될 수도 있습니다.
    - **308 Permanent Redirect**
        - 301과 기능은 같지만, 요청 메서드와 본문이 유지됩니다.
- **일시 리다이렉션**
    - **302 Found**
        - 리다이렉트시 요청 메서드가 `GET`으로 변경될 수 있으며, 그 과정에서 본문이 제거될 수도 있습니다.
    - **303 See Other**
        - 리다이렉트시 요청 메서드가 `GET`으로 변경됩니다.
    - **307 Temporary Redirect**
        - 302와 기능은 같지만, 리다이렉트시 요청 메서드와 본문이 유지됩니다.
- **PRG (Post/Redirect/Get) 패턴**
    - 사용자가 데이터를 제출한 후, 새로고침으로 인해 데이터가 중복으로 제출되는 것을 방지해줍니다.
    - `POST` 요청 후 리다이렉트를 통해 `GET` 요청으로 전환하여 결과 화면만 조회하도록 합니다.
- **기타 리다이렉션**
    - **304 Not Modified**
        - `캐시`를 목적으로 사용합니다.
        - 클라이언트에게 리소스가 수정되지 않았음을 알려주고, 클라이언트는 로컬 PC에 저장된 캐시를 재사용합니다. (캐시로 리다이렉트)
        - 응답에 메시지 바디를 포함하면 안 됩니다.

### 4xx (Client Error)

- **400 Bad Request**
    - 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없을 때 사용합니다.
    - 요청 구문, 메시지 등의 오류
- **401 Unauthorized**
    - 해당 리소스에 대한 `인증`이 필요함을 알립니다.
- **403 Forbidden**
    - 인증 자격 증명은 있지만, `접근 권한`이 불충분한 경우에 사용합니다.
- **404 Not Found**
    - 요청 리소스가 서버에 없을 때 사용합니다.
    - 또는 클라이언트가 권한이 부족한 리소스에 접근할 때, 해당 리소스를 숨기고 싶은 경우에 사용합니다.

### 5xx (Server Error)

- **500 Internal Server Error**
    - 서버 내부 문제로 오류가 발생했을 때 사용합니다.

## 참고

- [김영한 - 모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)