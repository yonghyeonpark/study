# 프로세스

## PCB(Process Control Block)

## 메모리 구조

# 스레드

## TCB(Thread Control Block)

## 메모리 구조

# 컨텍스트 스위칭

- 컨텍스트 스위칭은 `CPU/코어`에서 실행 중이던 `프로세스/스레드`가 다른 `프로세스/스레드`로 교체되는 것을 의미합니다.<br>
  (정확히 말하면, 프로세스 간의 컨텍스트 스위칭은 한 프로세스 내부의 스레드가 다른 프로세스 내부의 스레드로 교체되는 것을 뜻합니다.)
- 커널 모드에서 실행되며, `PCB` 또는 `TCB`를 참고하여 CPU의 레지스터 상태를 저장하고 복원합니다.

## 프로세스 컨텍스트 스위칭 & 스레드 컨텍스트 스위칭

- **MMU(Memory Management Unit)** 수정 및 **TLB(Translation Lookaside Buffer)** 플러시
  - `프로세스 컨텍스트 스위칭` 시, 서로 다른 가상 메모리 주소 공간을 사용하는 프로세스 간 전환이므로, `MMU`에서 사용하는 페이지 테이블을 새 프로세스의 페이지 테이블로 교체해야 합니다.
  - 또한, 가상 주소와 물리 주소 매핑 정보를 캐싱한 `TLB`도 초기화해야 합니다.
- 따라서 메모리 주소 관련 작업이 필요 없는 `스레드 컨텍스트 스위칭`이 더 빠릅니다.<br>

<br>

> 페이지 테이블은 가상 주소와 물리 주소를 매핑하는 자료 구조입니다.

## CPU 캐시에 미치는 영향

- 컨텍스트 스위칭(특히 프로세스 전환)이 발생하면, 이전 프로세스의 데이터가 CPU 캐시에 남아있게 됩니다.
- 새로운 프로세스 실행 시, 이 데이터는 무효화되며, 필요한 데이터를 다시 메모리에서 가져와야 합니다.
- 이로 인해 성능 저하로 이어질 수 있습니다.