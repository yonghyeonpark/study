# 동일성과 동등성

## 동일성

- 객체의 메모리 주소가 같은지 비교하는 개념입니다.
- 자바에서는 `==` 연산자를 사용하여 비교할 수 있습니다.

## 동등성

- 객체의 내용이 같은지 비교하는 개념입니다.
- 자바에서는 `equals()` 메서드를 사용하여 비교할 수 있습니다.
- 자바에서는 모든 객체가 `Object` 클래스를 상속받기 때문에, `equals()` 메서드를 기본적으로 가지고 있지만, 기본 `equals()` 메서드는 '==' 연산자를 사용하여 동일성을 비교합니다.
- 따라서 객체의 동등성을 올바르게 비교하기 위해서는 `equals()` 메서드를 오버라이딩하여 객체의 상태나 값을 비교하는 로직을 구현해야 합니다.

### hashCode()

- `equals()` 메서드를 오버라이딩할 때는 `hashCode()` 메서드도 함께 오버라이딩하는 것이 좋습니다. 
- `equals()`가 true를 반환하는 두 객체는 같은 객체로 취급되어야 하므로, 동일한 `hashCode()` 값을 가져야 `HashMap`, `HashSet` 같은 해시 기반 컬렉션에서 정상적으로 동작합니다.
- 만약 `hashCode()`를 오버라이딩하지 않으면, 같은 객체로 판단해야 할 두 객체가 서로 다른 해시값을 가져 해시 기반 컬렉션에서 중복 저장 등의 문제가 발생할 수 있습니다.
- 직접 객체를 비교할 때는 `equals()`만 사용해도 됩니다.

### Object.equals()

- `NullPointerException`을 방지하여 null 안정성을 확보해 줍니다.

```java
String s1 = null;
String s2 = "hi";

s1.equals(s2); // NullPointerException 발생
Objects.equals(s1, s2) // null 체크 자동 처리
```

### String의 비교

- 자바에서 문자열 리터럴은 문자열 상수 풀(`String Constant Pool`)에 저장되므로, 같은 문자열 리터럴은 같은 참조 값을 가지기 때문에 `==` 연산자가 true를 반환할 수 있습니다.
- 하지만 `new String()`을 사용하면 항상 새 객체를 만들기 때문에 `==` 연산자가 false를 반환할 수 있습니다.
- 이로 인해 예상치 못한 결과가 발생할 수 있으므로, 문자열 비교에는 `equals()`를 사용하는 것이 더 안전합니다.